<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Eco-Friendly Products</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body, html {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    .navbar {
      background-color: #278a00;
      color: white;
      height: 60px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 20px;
    }

    .navbar-content {
      width: 100%;
      max-width: 1140px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
    }

    .navbar-brand {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-weight: bold;
      font-size: 1.5rem;
      text-decoration: none;
    }

    .cart-btn, #searchToggle {
      background: white;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
    }

    #searchBarContainer {
      display: none;
      padding: 20px;
      background-color: #f1f1f1;
      position: relative;
      z-index: 9;
      margin-top: 60px;
    }

    main {
      position: relative;
      top: 0;
      bottom: 50px;
      left: 0;
      right: 0;
      overflow-y: auto;
      padding: 40px 20px 100px;
      background-color: #f8f9fa;
    }

    .product-card {
      background-color: #fff;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .product-card img {
      width: 100%;
      height: 120px;
      object-fit: contain;
      margin-bottom: 8px;
    }

    .stars {
      font-size: 0.9rem;
      color: #4caf50;
      margin-bottom: 6px;
    }

    .price {
      font-size: 15px;
      margin-bottom: 8px;
    }

    .eco-badge {
      font-size: 12px;
      padding: 3px 6px;
      border-radius: 4px;
      display: inline-block;
      color: #fff;
    }

    .eco-high { background-color: #28a745; }
    .eco-medium { background-color: #ffc107; color: #000; }
    .eco-low { background-color: #dc3545; }

    .alert {
      margin-top: 10px;
      display: none;
    }

    footer {
      background-color: #278a00;
      color: white;
      height: 50px;
      line-height: 50px;
      text-align: center;
    }

    #showMoreBtn {
      display: none;
      margin-top: 20px;
    }

    df-messenger {
      --df-messenger-button-titlebar-color: #278a00;
      --df-messenger-chat-background-color: #f8f9fa;
      --df-messenger-font-color: black;
      --df-messenger-send-icon: #278a00;
      position: fixed;
      bottom: 70px;
      right: 20px;
      z-index: 99;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <nav class="navbar">
    <div class="navbar-content">
      <div></div>
      <a class="navbar-brand" href="#">Eco Cart Sustainable Assistant</a>
      <div class="d-flex align-items-center">
        <button class="btn btn-light me-2" id="searchToggle" title="Search">üîç</button>
        <button class="cart-btn" id="cartButton">üõí Cart</button>
      </div>
    </div>
  </nav>

  <!-- Search Bar -->
  <div id="searchBarContainer" class="text-center">
    <input type="text" id="searchInput" class="form-control w-50 mx-auto" placeholder="Search for eco-friendly products...">
  </div>

  <!-- Main Content -->
  <main>
    <div class="container">
      <div class="row" id="productContainer"></div>
      <button class="btn btn-outline-success d-block mx-auto" id="showMoreBtn">Show More</button>
      <button class="btn btn-outline-secondary d-block mx-auto" id="showLessBtn" style="display: none;">Show Less</button>

      
      <div id="alert" class="alert alert-warning" role="alert">
        This product is already in your cart!
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    ABC
  </footer>

  <!-- Chatbot using Dialogflow -->
  <df-messenger
    intent="WELCOME"
    chat-title="EcoCart Assistant"
    agent-id="YOUR_DIALOGFLOW_AGENT_ID"
    language-code="en"
  ></df-messenger>

  <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

  <script>
    const cart = [];
    const products = [
      { name: "Ecofriendly Houseware", brand: "GreenLiving", image: "images/12.jpg", price: 7.99, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Metal-free Compostable Utensils" },
      { name: "Plastic Toothbrush", brand: "GenericCo", image: "images/111.jpg", price: 2.50, rating: "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ", ecoRating: "low", alternative: "Bamboo Toothbrush" },
      { name: "Reusable Metal Straw", brand: "SipSmart", image: "images/222.jpg", price: 3.00, rating: "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ", ecoRating: "medium", alternative: "Bamboo Straw" },
      { name: "Recycled Notebook", brand: "EcoWrite", image: "images/8.jpg", price: 4.75, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Digital Notes App" },
      { name: "Reusable Coffee Cup", brand: "BrandX", image: "images/3.jpg", price: 1.99, rating: "‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ", ecoRating: "low", alternative: "Steel Water Bottle" },
      { name: "Biodegradable Trash Bags", brand: "EarthCare", image: "images/7.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
      { name: "Hemp Backpack", brand: "EarthCare", image: "images/4.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
      { name: "Coconut Oil", brand: "EarthCare", image: "images/5.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
      { name: "Compostable Phone Case", brand: "EarthCare", image: "images/6.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
      { name: "Natural Honey", brand: "EarthCare", image: "images/9.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
      { name: "Kasoori Majal", brand: "EarthCare", image: "images/10.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
      { name: "Natural Soap", brand: "EarthCare", image: "images/11.jpg", price: 5.49, rating: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ", ecoRating: "high", alternative: "Compost Bin" },
    ];

    let showAll = false;

    function getEcoBadge(rating) {
      if (rating === "high") return '<span class="eco-badge eco-high">Eco Rating: High</span>';
      if (rating === "medium") return '<span class="eco-badge eco-medium">Eco Rating: Medium</span>';
      return '<span class="eco-badge eco-low">Eco Rating: Low</span>';
    }

    function updateCartCount() {
      document.getElementById("cartButton").innerText = `üõí Cart (${cart.length})`;
    }

    function renderProducts(productList = products) {
      const container = document.getElementById("productContainer");
      container.innerHTML = "";

      const visibleProducts = showAll ? productList : productList.slice(0, 6);
      visibleProducts.forEach((product, index) => {
        const card = document.createElement("div");
        card.className = "col-12 col-sm-6 col-lg-4 d-flex mb-4";


        card.innerHTML = `
          <div class="product-card flex-fill d-flex flex-column">
            <img src="${product.image}" alt="${product.name}" class="img-fluid mb-2 rounded">
            <h5>${product.name}</h5>
            <p class="mb-1"><strong>Brand:</strong> ${product.brand}</p>
            <div class="stars mb-1">${product.rating}</div>
            <div class="mb-2">${getEcoBadge(product.ecoRating)}</div>
            <div class="price mb-2"><strong>Price:</strong> $${product.price.toFixed(2)}</div>
            <p><strong>Greener Alternative:</strong><br>${product.alternative}</p>
            <button class="btn btn-success w-100 add-to-cart" data-index="${index}">Add to Cart</button>
          </div>
        `;
        container.appendChild(card);
      });

       if (!showAll && productList.length > 6) {
          document.getElementById("showMoreBtn").style.display = "block";
          document.getElementById("showLessBtn").style.display = "none";
      } else if (showAll && productList.length > 6) {
          document.getElementById("showMoreBtn").style.display = "none";
          document.getElementById("showLessBtn").style.display = "block";
      } else {
          document.getElementById("showMoreBtn").style.display = "none";
          document.getElementById("showLessBtn").style.display = "none";
      }

      document.getElementById("showLessBtn").addEventListener("click", () => {
         showAll = false;
         renderProducts();
      });




      document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', event => {
          const index = event.target.getAttribute('data-index');
          const product = productList[index];
          const alertBox = document.getElementById("alert");

          if (cart.some(item => item.name === product.name)) {
            alertBox.style.display = "block";
            alertBox.classList.add("show");
            setTimeout(() => {
              alertBox.style.display = "none";
              alertBox.classList.remove("show");
            }, 3000);
          } else {
            cart.push(product);
            localStorage.setItem("cartItems", JSON.stringify(cart));
            updateCartCount();
          }
        });
      });
    }

    document.getElementById("cartButton").addEventListener("click", () => {
      window.location.href = "cart.html";
    });

    document.getElementById("searchToggle").addEventListener("click", () => {
      const searchBar = document.getElementById("searchBarContainer");
      searchBar.style.display = searchBar.style.display === "none" ? "block" : "none";
    });

    document.getElementById("searchInput").addEventListener("input", function () {
      const query = this.value.toLowerCase();
      const filteredProducts = products.filter(product =>
        product.name.toLowerCase().includes(query) ||
        product.brand.toLowerCase().includes(query) ||
        product.alternative.toLowerCase().includes(query)
      );
      showAll = true;
      renderProducts(filteredProducts);
    });

    document.getElementById("showMoreBtn").addEventListener("click", () => {
      showAll = true;
      renderProducts();
    });

    renderProducts();
  </script>
</body>
</html>
